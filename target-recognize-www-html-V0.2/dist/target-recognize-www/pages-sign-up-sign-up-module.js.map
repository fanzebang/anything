{"version":3,"sources":["./src/app/pages/sign-up/sign-up-routing.module.ts","./src/app/pages/sign-up/sign-up.component.ts","./src/app/pages/sign-up/sign-up.component.html","./src/app/pages/sign-up/sign-up.module.ts"],"names":[],"mappings":"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","file":"pages-sign-up-sign-up-module.js","sourcesContent":["import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {SignUpComponent} from './sign-up.component';\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild([\r\n    {\r\n      path: '', component: SignUpComponent\r\n    }\r\n  ])],\r\n  exports: [RouterModule]\r\n})\r\nexport class SignUpRoutingModule {\r\n\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport sha256 from 'crypto-js/sha256';\r\nimport Hex from 'crypto-js/enc-hex';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '../../../environments/environment';\r\nimport {HttpResult} from '../../core/http-entity';\r\nimport {NzModalService} from 'ng-zorro-antd';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n  templateUrl: './sign-up.component.html',\r\n  styleUrls: ['./sign-up.component.less']\r\n})\r\nexport class SignUpComponent implements OnInit {\r\n\r\n  agreed = false;\r\n\r\n  constructor(private fb: FormBuilder, private http: HttpClient, private nzModal: NzModalService, private router: Router) {\r\n  }\r\n\r\n  validateForm!: FormGroup;\r\n\r\n  confirmationValidator = ((control: FormControl): { [s: string]: boolean } => {\r\n    if (!control.value) {\r\n      return {required: true};\r\n    } else if (control.value !== this.validateForm.controls.password.value) {\r\n      return {confirm: true, error: true};\r\n    }\r\n    return {};\r\n  });\r\n\r\n  submitForm(): void {\r\n    // tslint:disable-next-line:forin\r\n    for (const i in this.validateForm.controls) {\r\n      this.validateForm.controls[i].markAsDirty();\r\n      this.validateForm.controls[i].updateValueAndValidity();\r\n    }\r\n    if (this.agreed && this.validateForm.valid) {\r\n      // 将密码做sha256加密\r\n      const hashHex = Hex.stringify(sha256(this.validateForm.controls.password.value));\r\n\r\n      this.http.post(`${environment.API_URL}/v1/sign-up`, {\r\n        loginName: this.validateForm.controls.loginName.value,\r\n        passwd: hashHex,\r\n        name: this.validateForm.controls.name.value\r\n      }).subscribe((result: HttpResult<any>) => {\r\n        if (HttpResult.succeed(result.code)) {\r\n          this.nzModal.success({\r\n            nzContent: '注册成功',\r\n            nzOnOk: () => {\r\n              this.router.navigate(['/login']);\r\n            }\r\n          });\r\n\r\n        } else {\r\n          this.nzModal.error({\r\n            nzContent: result.message\r\n          });\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  updateConfirmValidator(): void {\r\n    /** wait for refresh value */\r\n    Promise.resolve().then(() => this.validateForm.controls.checkPassword.updateValueAndValidity());\r\n  }\r\n\r\n  getCaptcha(e: MouseEvent): void {\r\n    e.preventDefault();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.validateForm = this.fb.group({\r\n      // email: [null, [Validators.email, Validators.required]],\r\n      loginName: [null, [Validators.minLength(1), Validators.maxLength(45), Validators.required]],\r\n      password: [null, [Validators.required]],\r\n      checkPassword: [null, [Validators.required, this.confirmationValidator]],\r\n      name: [null, [Validators.required]],\r\n      // phoneNumberPrefix: ['+86'],\r\n      // phoneNumber: [null, [Validators.required]],\r\n      // website: [null, [Validators.required]],\r\n      // captcha: [null, [Validators.required]],\r\n      agree: [false]\r\n    });\r\n\r\n    this.validateForm.controls.agree.valueChanges.subscribe((value: boolean) => {\r\n      this.agreed = value;\r\n    });\r\n  }\r\n}\r\n","<div>\r\n  <a [href]=\"['/login']\">返回登录</a>\r\n</div>\r\n<div>\r\n  <form nz-form [formGroup]=\"validateForm\" (ngSubmit)=\"submitForm()\">\r\n    <!--\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired nzFor=\"email\">E-mail</nz-form-label>\r\n      <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" nzErrorTip=\"The input is not valid E-mail!\">\r\n        <input nz-input formControlName=\"email\" id=\"email\"/>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    -->\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired nzFor=\"loginName\">用户名</nz-form-label>\r\n      <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" nzErrorTip=\"用户名不正确!\">\r\n        <input nz-input formControlName=\"loginName\" id=\"loginName\"/>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzFor=\"password\" nzRequired>设置密码</nz-form-label>\r\n      <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" nzErrorTip=\"请设置密码!\">\r\n        <input nz-input type=\"password\" id=\"password\" formControlName=\"password\"\r\n               (ngModelChange)=\"updateConfirmValidator()\"/>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzFor=\"checkPassword\" nzRequired>再次输入密码</nz-form-label>\r\n      <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" [nzErrorTip]=\"errorTpl\">\r\n        <input nz-input type=\"password\" formControlName=\"checkPassword\" id=\"checkPassword\"/>\r\n        <ng-template #errorTpl let-control>\r\n          <ng-container *ngIf=\"control.hasError('required')\">\r\n            请再次输入一次密码!\r\n          </ng-container>\r\n          <ng-container *ngIf=\"control.hasError('confirm')\">\r\n            两次密码输入不一致!\r\n          </ng-container>\r\n        </ng-template>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzFor=\"name\" nzRequired>\r\n          <span>\r\n            姓名\r\n            <i nz-icon nz-tooltip nzTooltipTitle=\"想我们怎么称呼您呢？\" nzType=\"question-circle\"\r\n               nzTheme=\"outline\"></i>\r\n          </span>\r\n      </nz-form-label>\r\n      <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" nzErrorTip=\"请输入一个昵称!\">\r\n        <input nz-input id=\"name\" formControlName=\"name\"/>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <!--\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzFor=\"phoneNumber\" nzRequired>Phone Number</nz-form-label>\r\n      <nz-form-control\r\n        [nzSm]=\"14\"\r\n        [nzXs]=\"24\"\r\n        [nzValidateStatus]=\"validateForm.controls['phoneNumber']\"\r\n        nzErrorTip=\"Please input your phone number!\">\r\n        <nz-input-group [nzAddOnBefore]=\"addOnBeforeTemplate\">\r\n          <ng-template #addOnBeforeTemplate>\r\n            <nz-select formControlName=\"phoneNumberPrefix\" class=\"phone-select\">\r\n              <nz-option nzLabel=\"+86\" nzValue=\"+86\"></nz-option>\r\n              <nz-option nzLabel=\"+87\" nzValue=\"+87\"></nz-option>\r\n            </nz-select>\r\n          </ng-template>\r\n          <input formControlName=\"phoneNumber\" id=\"'phoneNumber'\" nz-input/>\r\n        </nz-input-group>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzFor=\"website\" nzRequired>Website</nz-form-label>\r\n      <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" nzErrorTip=\"Please input website!\">\r\n        <input nz-input id=\"website\" formControlName=\"website\" placeholder=\"website\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzFor=\"captcha\" nzRequired>Captcha</nz-form-label>\r\n      <nz-form-control\r\n        [nzSm]=\"14\"\r\n        [nzXs]=\"24\"\r\n        nzErrorTip=\"Please input the captcha you got!\"\r\n        nzExtra=\"We must make sure that your are a human.\">\r\n        <div nz-row [nzGutter]=\"8\">\r\n          <div nz-col [nzSpan]=\"12\">\r\n            <input nz-input formControlName=\"captcha\" id=\"captcha\"/>\r\n          </div>\r\n          <div nz-col [nzSpan]=\"12\">\r\n            <button nz-button (click)=\"getCaptcha($event)\">Get captcha</button>\r\n          </div>\r\n        </div>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    -->\r\n\r\n    <nz-form-item nz-row class=\"register-area\">\r\n      <nz-form-control [nzSpan]=\"14\" [nzOffset]=\"6\">\r\n        <label nz-checkbox formControlName=\"agree\">\r\n          <span>我已阅读 <a>《用户协议》</a></span>\r\n        </label>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item nz-row class=\"register-area\">\r\n      <nz-form-control [nzSpan]=\"14\" [nzOffset]=\"6\">\r\n        <button nz-button nzType=\"primary\" [disabled]=\"!agreed\">注册</button>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n</div>\r\n\r\n","import {NgModule} from '@angular/core';\r\nimport {SignUpRoutingModule} from './sign-up-routing.module';\r\nimport {CommonModule} from '@angular/common';\r\nimport {SignUpComponent} from './sign-up.component';\r\nimport {NzButtonModule, NzCheckboxModule, NzFormModule, NzInputModule, NzModalModule, NzSelectModule, NzToolTipModule} from 'ng-zorro-antd';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {IconsProviderModule} from '../../icons-provider.module';\r\n\r\nconst APP_MODULES = [SignUpRoutingModule];\r\nconst APP_COMPONENTS = [SignUpComponent];\r\nconst NZ_MODULES = [\r\n  IconsProviderModule, NzFormModule, NzInputModule, NzButtonModule, NzCheckboxModule, NzSelectModule, NzToolTipModule,\r\n  NzModalModule\r\n];\r\nconst NG_MODULES = [CommonModule, FormsModule, ReactiveFormsModule];\r\n\r\n@NgModule({\r\n  declarations: [...APP_COMPONENTS],\r\n  imports: [...APP_MODULES, ...NZ_MODULES, ...NG_MODULES]\r\n})\r\nexport class SignUpModule {\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}