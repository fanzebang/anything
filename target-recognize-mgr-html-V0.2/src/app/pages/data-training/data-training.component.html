


<div class="flex-row" style="height: 100%;">


<div *ngIf="isVisible1" nzTitle="The first Modal"
class="statistics-top flex-column"
style="height: 80%;
width:70%;
position: absolute;
z-index: 9999;
background: #031129;
margin: 50px 10%;
">
<div class="statistics-title" style="position: relative;">比对结果

  <div class="close" 
  style="width: 30px;height: 30px;position: absolute;right: 0px;top: 0px;"
  > 
  <i nz-icon nzType="close" nzTheme="outline" style="cursor: pointer;" (click)="handleCancel1()"></i>
</div>

</div>

 <div class="dbcontent"> 
   <div class="dbCharts">
     <div class="dbtitle">
        <div class="leftLine"></div> <div class="leftRect"></div>
        <div class="titleText">模型精度曲线</div>
        <div class="rightRect"></div><div class="rightLine"></div> 
     </div>
      <div id="lineCharts1" style="width: 100%;height:80%" ></div>
      <!-- [nzScroll]="{ x: '50%', y: '100%' }" -->
      <nz-table #basicTable [nzData]="complarelistOfData1" #borderedTable nzBordered style="margin-left: 20px;">
        <thead>
          <tr>
            <th>训练版本</th>
            <th>训练精度</th>
            <th>Loss值</th>
            <th>数据总数</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of basicTable.data">
            <td  nzBreakWord>{{ data.name }}</td>
            <td  nzBreakWord>{{ data.age }}</td>
            <td  nzBreakWord>{{ data.address }}</td>
            <td  nzBreakWord>{{ data.address }}</td>
          </tr>
        </tbody>
      </nz-table>

   </div>

   <div class="dbTable">
    <div class="dbtitle">
      <div class="leftLine"></div> <div class="leftRect"></div>
      <div class="titleText">分类数据详情</div>
      <div class="rightRect"></div><div class="rightLine"></div> 
   </div>
   <!-- [nzScroll]="{ x: '50%', y: '100%' }" -->
    <nz-table #basicTable [nzData]="complarelistOfData2" #borderedTable nzBordered style="margin-left: 20px;margin-top: 20px;" >
      <thead>
        <tr>
          <th>test1</th>
          <th>test2</th>
          <th>test3</th>
          <th>test4</th>
          
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of basicTable.data">
          <td nzBreakWord>{{ data.name }}</td>
        </tr>
      </tbody>
    </nz-table>

   </div>
     

  </div>
  

</div>

<div *ngIf="isVisible" nzTitle="The first Modal"
class="statistics-top flex-column"
style="height: 80%;
width: 80%;
position: absolute;
z-index: 9999;
background: #031129;
margin: 50px 5%;
">
<div class="statistics-title" style="position: relative;">模型精度：{{precision}}

  <div class="close" 
  style="width: 30px;height: 30px;position: absolute;right: 0px;top: 0px;"
  > 
  <i nz-icon nzType="close" nzTheme="outline" style="cursor: pointer;" (click)="handleCancel()"></i>
</div>

</div>
<nz-tabset nzType="card" (nzSelectChange)="tabChange($event)" >
  <nz-tab nzTitle="模型精度曲线" >
    <div class="content"> 
      <div class="lineCharts" id="lineCharts"></div>
      <div class="main-content imgList" id="csImg1">
        <h2 class="title" style="font-size:18px">评价样本库中的识别错误</h2>
        <div class="image-list" style="width: 100%;max-height: 450px;overflow-y: auto;">
            <div class="cover" *ngFor="let item of jdcurver"><img [src]="item" alt=""></div>
        </div>
      </div>

  </div>
  </nz-tab>
  <nz-tab nzTitle="测  试">
      <div class="content" style="flex-wrap: wrap;">
        <div style="flex: 0 0 100%;margin-left: 20px;">
          <label for="upload" style="color: #fff;margin-right: 10px;">测试:  </label>
          <input type="file" multiple="true" accept="image/*" style="color: #fff;" id="imgInput" >
        </div>
        <div class="main-content imgList" id="csImg">
          <div class="image-list1" style="width: 100%;max-height: 450px;overflow-y: auto;" id="image-list1">
           
          </div>
        </div>
      </div>
  </nz-tab>
</nz-tabset>
  </div>

  <div class="train-left flex-row">
    <div class="train-area flex-column">
      <div class="train-area-btns flex-row">
        <button class="train-area-btn-item" [class.active]="flag === -1" (click)="changeStatus(-1)">排队中</button>
        <button class="train-area-btn-item" [class.active]="flag === 0" (click)="changeStatus(0)">进行中</button>
        <button class="train-area-btn-item" [class.active]="flag === 1" (click)="changeStatus(1)">已结束</button>
      </div>

      <div class="train-table-box" >
        <div class="train-btns" style="position:relative">

          <ng-container *ngIf="flag===1">
            <nz-select [(ngModel)]="selectData"  style="position: absolute;left:0;" class="select" (ngModelChange)="ngModelChange()">
              <nz-option  *ngFor="let item of selectList" [nzValue]="item" [nzLabel]="item"></nz-option>
            </nz-select>
          </ng-container>

          <ng-container *ngIf="flag===0">
            <button class="btn" (click)="endTask()">暂停</button>
          </ng-container>

          <ng-container *ngIf="compareDisplay">
            <button class="btn" (click)="startCompare()">开始对比</button>
          </ng-container>

          <ng-container *ngIf="flag===1">
            <button class="btn" (click)="trainResume()">继续训练</button>
          </ng-container>

          <button class="btn btn-remove" (click)="delete()">删除</button>
          <button class="btn btn-new-task" (click)="addTask(0)" *ngIf="status == 'LINE_UP'">新建任务</button>
        </div>

        <div class="flex-column">
          <nz-table class="blue-table" #rowSelectionTable nzShowSizeChanger [nzData]="listOfData"
                    [nzShowPagination]="false"
                    [nzTotal]="dataTotal" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize">
            <thead>
            <tr>
              <th
                [(nzChecked)]="isAllDisplayDataChecked"
                [nzIndeterminate]="isIndeterminate"
                (nzCheckedChange)="checkAll($event)"
              ></th>
              <th>任务名称</th>
              <th>数据源</th>
              <th>方式</th>
              <th>模式</th>
              <th>状态</th>
              <th>开始时间</th>
              <th *ngIf="flag === 1">操作</th>
              <th *ngIf="flag === 1">发布</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of rowSelectionTable.data;index as ids" (click)="tableClick(data.id)" [class.current-row]="dataTrain?.id === data.id">
              <td nzShowCheckbox
                  [(nzChecked)]="mapOfCheckedId[data.id]"
                  (nzCheckedChange)="refreshStatus(ids)"></td>
              <td>{{ data.taskName }}</td>
              <td>{{ data.typeSourceName }}</td>
              <td>{{ data.taskMode | trainTaskMode}}</td>
              <td>{{ data.taskPattern |taskPattern}}</td>
              <td>{{ data.taskStatus | taskStatus}}</td>
              <td>{{ data.createdTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
              <td *ngIf="flag === 1">
                <button class="btn" (click)="checkModelPrecision($event,data)">模型精度</button>
                <!--
                <span style="color: #FFF;background: #15a0ff;padding: 4px 8px;border-radius: 2px;cursor: pointer;"
                      (click)="checkModelPrecision($event,data)">模型精度</span>
                      -->
              </td>
              <td *ngIf="flag === 1">
                <button class="btn" (click)="download($event, data)">下载</button>
              </td>
            </tr>
            </tbody>
          </nz-table>

          <!--
          <table class="trainning-table">
            <thead>
            <tr>
              <th>任务名称</th>
              <th>数据源</th>
              <th>方式</th>
              <th>模式</th>
              <th>状态</th>
              <th>开始时间</th>
            </tr>
            </thead>
            <tbody>
            <tr>

              <td>Minnie Ford</td>
              <td>可见光</td>
              <td>增量训练</td>
              <td>自动</td>
              <td>40%</td>
              <td>2018.06.23 15:36</td>
            </tr>

            <tr>
              <td>Minnie Ford</td>
              <td>可见光</td>
              <td>增量训练</td>
              <td>自动</td>
              <td>40%</td>
              <td>2018.06.23 15:36</td>
            </tr>

            <tr>
              <td>Minnie Ford</td>
              <td>可见光</td>
              <td>增量训练</td>
              <td>自动</td>
              <td>40%</td>
              <td>2018.06.23 15:36</td>
            </tr>


            </tbody>
          </table>
          -->

        </div>
      </div>
    </div>
  </div>

  <ng-container *ngIf="rightComponent">
    <div class="train-right flex-column">
      <div class="train-classifies flex-column">
        <div class="train-title">任务进度</div>

        <div class="echart-box">
          <nz-progress [nzPercent]="dataTrain?.taskProgress | taskProgress" nzType="circle" nzStrokeColor="#159FFF"
                       nzStrokeWidth="12">
           </nz-progress>
        </div>
      </div>

      <div class="train-images flex-column">
        <div class="train-title">详细信息</div>

        <div class="detail-info-box flex-column">
          <div class="detail-info-type flex-row">
            <span class="detail-info-param">任务名称</span>
            <span class="detail-info-value">{{dataTrain?.taskName}}</span>
          </div>
          
          <div class="detail-info-type flex-row">
            <span class="detail-info-param">任务说明</span>
            <span class="detail-info-value">{{dataTrain?.taskPattern}}</span>
          </div>

          <div class="detail-info-type flex-row">
            <span class="detail-info-param">类别</span>
            <span class="detail-info-value">{{dataTrain?.typeSourceName}}</span>
          </div>

          <div class="detail-info-type flex-row">
            <span class="detail-info-param">应用场景</span>
            <span class="detail-info-value">{{dataTrain?.taskModeName}}</span>
          </div>
          
          <div class="detail-info-type flex-row">
            <span class="detail-info-param">任务模式</span>
            <span class="detail-info-value">{{dataTrain?.taskPattern |taskPattern}}</span>
          </div>

          <div class="detail-info-type flex-row">
            <span class="detail-info-param">触发条件</span>
            <span class="is_mark">每日</span>
          </div>

          <div class="detail-info-type flex-row">
            <span class="detail-info-param">任务方式</span>
            <span class="detail-info-value">{{ dataTrain?.taskMode | trainTaskMode}}</span>
          </div>
        </div>

        <button class="btn train-btn-edit" (click)="addTask(dataTrain.id)">编辑</button>
      </div>
    </div>
  </ng-container>

</div>
<div class="model-compare" [class.show-compare]="showCompare">
  <div class="model-compare-title">
    <span>对比框</span>
    <i nz-icon nzType="close" nzTheme="outline" (click)="closeCompare()"></i>
  </div>
  <div class="compare-model-row" *ngFor="let cdt of comparingDataTrainList">
    <span>{{cdt.compareName}}</span>
    <i nz-icon nzType="close" nzTheme="outline" (click)="removeCompareItem(cdt)"></i>
  </div>

  <!--
  <div class="compare-model-row">
    <span>模型二</span>
    <i nz-icon nzType="close" nzTheme="outline"></i>
  </div>

  <div class="compare-model-row">
    <span>模型三</span>
    <i nz-icon nzType="close" nzTheme="outline"></i>
  </div>
  -->

  <div class="model-compare-btn">
    <button class="btn" (click)="startCompare()">开始对比</button>
  </div>
  <div class="model-compre-del">
    <i nz-icon nzType="delete" nzTheme="outline"></i>
    <a nz-button nzType="link" (click)="clearCompare()">清空对比栏</a>
  </div>
</div>
