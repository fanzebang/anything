{"version":3,"sources":["./src/app/pages/data-mark/data-mark-routing.module.ts","./src/app/pages/data-mark/data-mark.component.ts","./src/app/pages/data-mark/data-mark.component.html","./src/app/pages/data-mark/data-mark.module.ts","./src/app/pages/data-mark/data-mark.service.ts","./src/app/pages/data-mark/mark-sample-tree.component.ts","./src/app/pages/data-mark/mark-sample-tree.component.html"],"names":[],"mappings":"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","file":"data-mark-data-mark-module.js","sourcesContent":["import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {DataMarkComponent} from './data-mark.component';\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild([{\r\n    path: '', component: DataMarkComponent\r\n  }])],\r\n  exports: [RouterModule]\r\n})\r\nexport class DataMarkRoutingModule {\r\n\r\n}\r\n","import {AfterViewInit, ChangeDetectorRef, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {environment} from '../../../environments/environment';\r\nimport {HttpResult} from '../../core/http-entity';\r\nimport {NzMessageService, NzModalService} from \"ng-zorro-antd\";\r\nimport {MarkSampleTreeComponent} from \"./mark-sample-tree.component\";\r\nimport { fromEvent } from 'rxjs';\r\nimport {DataMarkService} from \"./data-mark.service\"\r\nimport axios from 'axios';\r\nimport { Expression } from '@angular/compiler';\r\n\r\ndeclare var AILabel:any;\r\ndeclare var $:any\r\n@Component({\r\n  templateUrl: './data-mark.component.html',\r\n  styleUrls: ['./data-mark.component.less', './annotation.less']\r\n})\r\nexport class DataMarkComponent implements OnInit, AfterViewInit {\r\n\r\n  allotFiles: Array<AllotFile> = [];\r\n  currentAllotFile: AllotFile;\r\n  currentIndex: number;\r\n\r\n  @ViewChild('imgCanvasElement')\r\n  imgCanvasElmRef: ElementRef;\r\n\r\n  @ViewChild('drawCanvasElement')\r\n  drawCanvasElmRef: ElementRef;\r\n\r\n\r\n  uninterested:any = false;\r\n  drawingRects: any = [];\r\n\r\n  setImgSizeInfo:any ={\r\n    isBigImg : false,\r\n    src : \"assets/images/icon06.png\",\r\n    title:''\r\n  }\r\n  \r\n  markcountData:any = {\r\n      stayMarkNum:25,\r\n      MarkedNum:25,\r\n      MarkProgress:50,\r\n  }\r\n  lableAloneStatus:boolean = false\r\n  startX: number;\r\n  startY: number;\r\n  endX: number;\r\n  endY: number;\r\n keyboardSubscription: any\r\n keyboardUp:any\r\n  drawing = false;\r\n  markMode = 'manual';\r\n  gMapArr:any;\r\n  markData:any = {\r\n    dataArr:[],\r\n    theFeatureId:\"\",\r\n  };\r\n  gfeatureLayer:any\r\n  intervalLoadSampleFiles:any\r\n  constructor(private http: HttpClient, private nzMessage: NzMessageService,private dataMarkService:DataMarkService,) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n   \r\n    this.listenKeyboard(); // \r\n    this.listenKeyboard2();\r\n    // var interval\r\n    // window.onfocus=function(){interval=window.setInterval(\"clipboardData.setData('text','')\",100);}\r\n    // window.onblur=function(){window.clearInterval(interval);}\r\n\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.loadSampleFiles();\r\n    this.reqMarkCountData();\r\n   this.intervalLoadSampleFiles = setInterval(()=>{\r\n      var thisTime:any = new Date()\r\n      if((thisTime -this.listenTime)/1000 >= 1*60*10){\r\n        this.loadSampleFiles();\r\n      }\r\n    },1000)\r\n  \r\n  }\r\n\r\n  private reqMarkCountData(){\r\n\r\n    axios.post(`${environment.API_URL}/v1/mark-detect/markStatistics`,{},{\r\n      headers: {\r\n        'Authorization':'Bearer '+localStorage.getItem('Bearer'),\r\n        'TR-Role': 'TR-User'\r\n      }\r\n    })\r\n    .then((result:any)=>{\r\n      if(result.data.code == 1){\r\n        let prseData =  JSON.parse(result.data.data)\r\n        this.markcountData.stayMarkNum = prseData.NotMark\r\n        this.markcountData.MarkedNum = prseData.isMark\r\n        this.markcountData.MarkProgress =  ((this.markcountData.MarkedNum/(this.markcountData.MarkedNum+this.markcountData.stayMarkNum))*100).toFixed(1)\r\n      \r\n      }\r\n      \r\n    })\r\n\r\n  }\r\n\r\n\r\n private listenKeyboard() {\r\n\r\n    this.keyboardSubscription = fromEvent(window, 'keydown').subscribe((event: any) => {\r\n      if(event.keyCode == 39){\r\n        this.nextAllocFile()\r\n      }else if(event.keyCode == 37){\r\n        this.prevAllocFile()\r\n      }else if(event.keyCode == 32){\r\n\r\n        this.gMapArr.setMode(\"PAN\")\r\n\r\n      }else if(event.keyCode  == 46){\r\n        try{\r\n          if(this.gMapArr.getActiveFeature().props.name == \"uninterested\"){\r\n            this.gfeatureLayer.removeFeatureById(this.gMapArr.getActiveFeature().id)\r\n          }else if(this.gMapArr.getActiveFeature().props.name == \"123\"){\r\n            var that = this\r\n            let idx:number; \r\n            let textId = this.gMapArr.getActiveFeature().props.textId;\r\n            $.each(that.drawingRects,function(i,n){\r\n              if(that.drawingRects[i].relatedTextId == textId){\r\n                idx = i\r\n              }\r\n            })\r\n            this.delRect(idx)\r\n          }\r\n        }catch(e){\r\n          console.log(e)\r\n        }\r\n    \r\n      }\r\n\r\n\r\n      if(event.ctrlKey){\r\n        if(event.keyCode == 83){\r\n          event.preventDefault();\r\n          this.saveRect()\r\n        }\r\n      }\r\n\r\n    });\r\n    this.keyboardUp = fromEvent(window, 'keyup').subscribe((event: any) => {\r\n      if(event.keyCode == 32){\r\n        this.gMapArr.setMode(\"RECT\")\r\n      }\r\n    })\r\n    \r\n  }\r\n\r\n  gMapActive(index){\r\n        // this.lableAloneStatus = false;\r\n        this.singleTarget = true\r\n        let feature = this.gMapArr.layers[1].features[index];\r\n          // if(element.props.name != \"uninterested\"){\r\n        this.gMapArr.setActiveFeature(feature);\r\n          // }\r\n          for (let index = 0; index < feature.layer.features.length; index++) {\r\n            const element = feature.layer.features[index];\r\n            if(element.props.name != \"uninterested\"){\r\n            this.drawingRects[index].select = false\r\n            if(element.id == feature.id){\r\n              this.drawingRects[index].select = true\r\n              // console.log(this.drawingRects)\r\n            }\r\n            }\r\n          }\r\n          \r\n  }\r\n\r\n\r\n  keyboardVerifySubscription2:any;\r\n  singleTarget:boolean = false;\r\n  private listenKeyboard2() {\r\n    this.keyboardVerifySubscription2 = fromEvent(window, 'keydown').subscribe((event: any) => {\r\n      if(event.keyCode == 192){\r\n        if(!this.lableAloneStatus){\r\n          if(!this.singleTarget && this.gMapArr.layers[1].features.length > 0 ){\r\n            this.singleTarget = true;\r\n            this.gMapActive(0)\r\n            // this.listenKeyboard();\r\n            // this.changeClassIndex(0)\r\n          }else{\r\n            let feature = this.gMapArr.getActiveFeature();\r\n            // let featuresLength = 0;\r\n            for (let index = 0; index < this.gMapArr.layers[1].features.length; index++) {\r\n              const element = this.gMapArr.layers[1].features[index];\r\n              try{\r\n                if(element.id == feature.id){\r\n                  this.gMapActive(index+1)\r\n                }\r\n              }catch(e){\r\n                this.gMapActive(0)\r\n              }\r\n            }\r\n         \r\n          }\r\n        }else{\r\n          if(this.selectClassIndex1+1<this.gMapArr.layers[1].features.length){\r\n            this.selectClassIndex1++\r\n          }else{\r\n            this.selectClassIndex1 = 0\r\n\r\n          }\r\n          this.labelShowAlone(this.selectClassIndex1)\r\n          // if(this.selectClassIndex1-1>=0){\r\n          //     this.labelShowAlone(this.selectClassIndex1-1)\r\n          //   }else if(this.selectClassIndex1+1<this.gMapArr.layers[1].features.length){\r\n          //     this.labelShowAlone(this.selectClassIndex1+1)\r\n          //   }\r\n            // return false\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  removeKeyboard() {\r\n    this.keyboardSubscription.unsubscribe()\r\n    this.keyboardUp.unsubscribe()\r\n    if(this.keyboarChangeFeature) this.keyboarChangeFeature.unsubscribe()\r\n    if(this.keyboardVerifySubscription2) this.keyboardVerifySubscription2.unsubscribe()\r\n  }\r\n\r\n \r\n\r\n  ngOnDestroy(): void {\r\n    //Called once, before the instance is destroyed.\r\n    //Add 'implements OnDestroy' to the class.\r\n    this.removeKeyboard()\r\n    clearInterval(this.intervalLoadSampleFiles)\r\n  }\r\n\r\n\r\n\r\n  loadSampleFiles() {\r\n\r\n    this.http.get(`${environment.API_URL}/v1/sample-oss-file/allot`).subscribe((result: HttpResult<any>) => {\r\n      if (HttpResult.succeed(result.code)) {\r\n        this.allotFiles = result.data.map((file) => {\r\n          if(localStorage.getItem('sampleResourcePath').split(\"/\")[3] != file.bucketName){\r\n            file.imgSrc = `${localStorage.getItem('sampleResourcePath').split(\"/\")[0]}//${localStorage.getItem('sampleResourcePath').split(\"/\")[2]}/${file.bucketName}/${file.ossKey}`\r\n          }else{\r\n            file.imgSrc = localStorage.getItem('sampleResourcePath')+'/'+file.ossKey\r\n          }\r\n          if(file.markStatus == 4){file.samplePath = file.errorCorrectionMsg; file.sampleTypeId = 501 ;}\r\n          return {\r\n            id: file.id,\r\n            rects: [],\r\n            file,\r\n            scaleRatio: 1,\r\n            relatedTextId:[]\r\n          };\r\n        });\r\n\r\n// \r\nconst deWeight = (arr, ...arguements) => {\r\n  function getBoolean (o, m) {\r\n      let list = arguements.map(x => o[x] == m[x])\r\n      return list.every(i => i)\r\n  }\r\n  let result = []\r\n  // some\r\n  arr.map(o => !result.some(m => getBoolean(o, m)) ? result.push(o) : '')\r\n  return result\r\n}\r\n\r\n// \r\nlet arr2 = deWeight(this.allotFiles , 'id')\r\nthis.allotFiles = arr2\r\n\r\n\r\n        if (this.allotFiles.length > 0) {\r\n          this.currentAllotFile = this.allotFiles[0];\r\n          this.currentIndex = 0;\r\n     \r\n          setTimeout(() => {\r\n            this.drawFileInCanvas(this.currentAllotFile);\r\n          }, 100);\r\n            \r\n       \r\n          \r\n        }\r\n      }\r\n    });\r\n  }\r\nlistenTime:any;\r\n\r\nloadSy () {\r\n  var config = {\r\n      tw: 300, //\r\n      th: 150,  // \r\n      c: 80 // , \r\n  }\r\n  var dom:any = document.getElementById(\"sy\");\r\n  var userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  var date = new Date().getFullYear() +'-'+ (new Date().getMonth()+1) +'-'+new Date().getDate();\r\n\r\n  var data = {\r\n      name: userInfo.name+'-'+userInfo.id+'-'+date,\r\n      code: '',\r\n      day:''\r\n  }\r\n  var width = dom.offsetWidth;\r\n  dom.style.width = width + \"px\";\r\n  var height = dom.offsetHeight;\r\n  dom.style.height = height + \"px\";\r\n  var wnum:any = width / config.tw || 1;\r\n  wnum = parseInt(wnum)\r\n  var hnum:any = height / config.th || 1;\r\n  wnum = parseInt(hnum)\r\n  var wc = (width - wnum * config.tw) / wnum - 1 || 0;\r\n  var hc = (height - hnum * config.th + config.c) / hnum - 1 || 0;\r\n  var num = wnum * (hnum - 1);\r\n  var html = [];\r\n  for (var i = 0; i < num; i++) {\r\n      html.push('<div style=\"width: ' + (config.tw + wc) + 'px;height: ' + (config.th + hc) + 'px\">', data.name, '<br/>', data.code, '<br/>', data.day, '</div>');\r\n  }\r\n  dom.innerHTML = html.join(\"\");\r\n\r\n  $(\".table-sy div\").css({\r\n    'display': 'flex',\r\n    'align-items': 'center',\r\n    'justify-content': 'center',\r\n    'transform': 'rotate(-40deg)',\r\n    'float': 'left'\r\n  })\r\n\r\n    \r\n\r\n}\r\n\r\ndrawFileInCanvas(allotFile: AllotFile) {\r\n  $(\"#aiLabel\").empty()\r\n  this.setImgSizeInfo ={\r\n    isBigImg : false,\r\n    src : \"assets/images/icon06.png\",\r\n    title:''\r\n  } \r\nthis.listenTime = new Date();\r\nthis.drawingRects = []\r\n var that = this\r\n var drawingStyle;\r\n var imgSrc:any = localStorage.getItem('sampleResourcePath')+`/${allotFile.file.ossKey}`;\r\n if(localStorage.getItem('sampleResourcePath').split(\"/\")[3] != allotFile.file.bucketName){imgSrc=`${localStorage.getItem('sampleResourcePath').split(\"/\")[0]}//${localStorage.getItem('sampleResourcePath').split(\"/\")[2]}/${allotFile.file.bucketName}/${allotFile.file.ossKey}`}\r\n var img = new Image();\r\n  img.src = imgSrc;\r\n\r\nif (img.complete){\r\n\r\n\r\n const imgWidth =  img.width ;\r\n const imgHeight =  img.height ;\r\n this.gMapArr= new AILabel.Map(`aiLabel`,{\r\n    center: {x: imgWidth/2, y: imgHeight/2}, // \r\n    zoom: imgWidth*2,\r\n    mode: 'RECT', // \r\n    refreshDelayWhenZooming: false, // \r\n    zoomWhenDrawing: true,\r\n    panWhenDrawing: false,\r\n    featureCaptureWhenMove:true,\r\n    zoomWheelRatio: 5 , // [0, 10), \r\n    withHotKeys: true ,// \r\n    zoomMax: imgWidth * 10,\r\n    zoomMin: imgWidth / 10\r\n})  \r\n$(\".canvas-container\").append(\"<div id='sy' class='table-sy' style= 'width: 100%;height: 100%;position: absolute;pointer-events: none; /**/color:rgba(210, 214, 217,.2);z-index: 99999999999;opacity: .5;'></div>\")\r\nthis.loadSy()\r\n\r\n\r\n  var imageLayer = new AILabel.Layer.Image(\r\n    'img', // id\r\n    {\r\n      src: imgSrc,\r\n      width: imgWidth,\r\n      height: imgHeight,\r\n      crossOrigin: false, // true\r\n      position: { // \r\n          x: 0,\r\n          y: 0\r\n      },\r\n    },\r\n    {name: ''},\r\n    {zIndex: 1} \r\n  );\r\n  \r\n  that.gMapArr.addLayer(imageLayer)\r\n  that.gfeatureLayer = new AILabel.Layer.Feature(`feature`, {name: ''}, {zIndex:19});\r\n  that.gMapArr.addLayer(that.gfeatureLayer)\r\n  const gFirstTextLayer = new AILabel.Layer.Text(\r\n    'first-layer-text', // id\r\n    {name: ''}, // props\r\n    {zIndex: 12, opacity: 1} // style\r\n  );\r\n  that.gMapArr.addLayer(gFirstTextLayer);\r\n  that.gMapArr.events.on('drawDone', (type:any, data:any, data1:any) => {\r\n    var feature:any;\r\n  \r\n    const relatedTextId = `label-text-id-${+new Date()}`;\r\n    const relatedDeleteMarkerId = `label-marker-id-${+new Date()}`;\r\n  if (type === 'RECT') {\r\n        // feature\r\n        if(!that.uninterested){\r\n          feature = new AILabel.Feature.Rect(\r\n            `${+new Date}`, // id\r\n            data, // shape\r\n            {name: '',textId: relatedTextId}, // props\r\n            {strokeStyle: '#00f', fillStyle: '#0f0', globalAlpha: 0.2, lineWidth: 1, fill: true, stroke: true} // style\r\n        );\r\n        }else{\r\n          feature = new AILabel.Feature.Rect(\r\n            `${+new Date}`, // id\r\n            data, // shape\r\n            {name: 'uninterested',textId: relatedTextId}, // props\r\n            {strokeStyle: '#031129', fillStyle: '#031129', globalAlpha: 1, lineWidth: 1, fill: true, stroke: true} // style\r\n          );\r\n        }\r\n  \r\n    that.gfeatureLayer.addFeature(feature);\r\n  \r\n    var text \r\n  \r\n  \r\n    that.allotFiles.forEach(x=>{\r\n        if(x.id == allotFile.id){\r\n         var arr =  x.file.samplePath.split(\"/\")\r\n         if(arr.length != 1){\r\n          var length = arr.length-2\r\n          text = arr[length]\r\n         }else{\r\n          text = arr[0]\r\n         }\r\n         if(!that.uninterested){\r\n          x.relatedTextId.push(relatedTextId)\r\n         }\r\n         \r\n        }\r\n    \r\n       \r\n      })\r\n  \r\n    \r\n  \r\n  \r\n       // feature\r\n       const {x: ltx, y: lty} = data;\r\n       const gFirstText = new AILabel.Text(\r\n           relatedTextId, // id\r\n           {text: text, position: {x: ltx, y: lty}, offset: {x: 0, y: 0}}, // shape, \r\n           {name: ''}, // props\r\n           {fillStyle: '#15a0ff', strokeStyle: '#f0f8ff00', background: true, globalAlpha: 1, fontColor: '#fff'} // style\r\n       );\r\n       if(!that.uninterested){\r\n        gFirstTextLayer.addText(gFirstText);\r\n       }\r\n       \r\n    }else if(type === 'POLYGON'){\r\n      feature = new AILabel.Feature.Polygon(\r\n        `${+new Date}`, // id\r\n        {points: data}, // shape\r\n        {name: '123'}, // props\r\n        drawingStyle// style\r\n     );\r\n     that.gfeatureLayer.addFeature(feature);\r\n    }\r\n    that.markData.dataArr = []\r\n    $.each(that.gMapArr.layers[1].features,function(i:any,x:any){\r\n      that.markData.dataArr.push({\r\n          style:x.style,\r\n          type:x.type,\r\n          shape:x.shape,\r\n          id:x.id\r\n      })\r\n    })\r\n    that.markData.theFeatureId = feature.id\r\n    // this.initDrawingCanvas();\r\n   \r\n  $.each(that.allotFiles,function(i,x){\r\n    if(x.id == allotFile.id){\r\n      var arr =  x.file.samplePath.split(\"/\")\r\n      var length = arr.length-2\r\n      if(arr.length != 1){\r\n       length = arr.length-2\r\n       text = arr[length]\r\n      }else{\r\n       length =  0\r\n       text = arr[length]\r\n      }\r\n      \r\n  \r\n      if(!that.uninterested){\r\n        axios.post(`${environment.API_URL}/v1/sample-oss-file/relationQueryCatalogue?sampleTypeName=${text}`,{sampleTypeName:text},{\r\n          headers: {\r\n            'Authorization':'Bearer '+localStorage.getItem('Bearer'),\r\n            'TR-Role': 'TR-User'\r\n          }\r\n        })\r\n        .then((result:any)=>{\r\n          if(result.data.data.length>0){\r\n            result.data.data[0].relatedTextId = x.relatedTextId\r\n            feature.props.name =result.data.data[0].id \r\n            that.drawingRects.push({\r\n              id:result.data.data[0].id,\r\n              samplePath:result.data.data[0].samplePath,\r\n              markData:result.data.data[0],\r\n              relatedTextId\r\n            })\r\n          }else{\r\n            that.drawingRects.push({\r\n              id:x.file.id,\r\n              samplePath:x.file.samplePath,\r\n              markData:x,\r\n              relatedTextId\r\n            })\r\n          }\r\n        })\r\n      }\r\n     }\r\n  })\r\n  \r\n  \r\n  });\r\n  \r\n  that.gMapArr.events.on('featureSelected',(feature: any) => {\r\n    let index;\r\n    for (let i = 0; i < feature.layer.features.length; i++) {\r\n      const element = feature.layer.features[i];\r\n      if(element.props.name != \"uninterested\"){\r\n      this.drawingRects[i].select = false\r\n      if(element.id == feature.id){\r\n        index = i\r\n      }\r\n      }\r\n    }\r\n    that.gMapActive(index)\r\n    // that.gMapArr.setActiveFeature(feature);\r\n    // console.log(feature.layer.features)\r\n\r\n  })\r\n  \r\n  that.gMapArr.events.on('featureUnselected',() => {\r\n      // that.gMapArr.setActiveFeature(null);\r\n      that.gMapUnactive()\r\n  })\r\n  \r\n  that.gMapArr.events.on('featureUpdated',(feature: any, shape: any) => {\r\n    feature.updateShape(shape);\r\n    \r\n    const markerId = feature.props.deleteMarkerId;\r\n    const textId = feature.props.textId;\r\n    // text\r\n    const targetText = gFirstTextLayer.getTextById(textId);\r\n  \r\n    targetText.updatePosition(feature.getPoints()[0]);\r\n    that.markData.dataArr = []\r\n    $.each(that.gMapArr.layers[1].features,function(i:any,x:any){\r\n      that.markData.dataArr.push({\r\n        style:x.style,\r\n        type:x.type,\r\n        shape:x.shape,\r\n        id:x.id\r\n      })\r\n    })\r\n  })\r\n       // \r\n       if (that.markMode === 'auto') {\r\n        that.autoMark();\r\n      }\r\n\r\n\r\n}else{\r\n  setTimeout(()=>{\r\n  this.drawFileInCanvas(allotFile)\r\n},200)\r\n}\r\n\r\n \r\n  }\r\n\r\n\r\n\r\n  redraw(points?: { startX: number, startY: number, endX: number, endY: number }) {\r\n    this.gfeatureLayer.removeFeatureById(this.markData.theFeatureId);\r\n  }\r\n\r\n  cancelRect(){\r\n    if (this.drawingRects.length > 0) {\r\n      this.drawingRects.splice(0, this.drawingRects.length);\r\n      this.gfeatureLayer.removeAllFeatures();\r\n       // text\r\n       this.gMapArr.layers[2].removeAllTexts();\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n \r\n  saveRect(){\r\n    if (this.gMapArr.layers[1].features.length < 1) {\r\n      this.nzMessage.error(\"\");\r\n      return;\r\n    }\r\n    this.currentAllotFile.rects = this.drawingRects;\r\n    const reqBody: { [key: number]: any } = {};\r\n    var that = this\r\n    let featuresArr = [];\r\n    var dataRight = true\r\n    $.each(this.gMapArr.layers[1].features,function(i,rect){\r\n      if(rect.props.name != \"uninterested\"){\r\n        delete rect.layer\r\n        if(!rect.style.stroke){\r\n          rect.style.globalAlpha =0.2 \r\n          rect.style.stroke = true }\r\n       \r\n        featuresArr.push(rect) \r\n      }\r\n    })\r\n\r\n    $.each(featuresArr,function(i,rect){\r\n      if(!rect.props.name) dataRight = false\r\n      rect.props.text = that.gMapArr.layers[2].texts[i].textInfo.text\r\n      let xmin = parseInt(rect.shape.x) \r\n      let ymin = parseInt(rect.shape.y) ;\r\n      let xmax = parseInt(rect.shape.x) + parseInt(rect.shape.width);\r\n      let ymax = parseInt(rect.shape.y) + parseInt(rect.shape.height);\r\n      if(that.drawingRects[i].id){\r\n        reqBody[that.drawingRects[i].id] = {\r\n          \"xmin\": xmin,\r\n          \"ymin\": ymin,\r\n          \"xmax\": xmax,\r\n          \"ymax\": ymax\r\n        }\r\n      }else{\r\n        reqBody[that.currentAllotFile.file.sampleTypeId] = {\r\n          \"xmin\": xmin,\r\n          \"ymin\": ymin,\r\n          \"xmax\": xmax,\r\n          \"ymax\": ymax\r\n        }\r\n      }\r\n    })\r\n\r\n    let saveData = JSON.stringify(featuresArr)\r\n \r\n  if(!dataRight) return this.nzMessage.error(\",\");\r\n\r\n    this.http.patch(`${environment.API_URL}/v1/sample-oss-file/patch_mark_status`,{}, {\r\n      headers:{\r\n        'Content-Type':'application/json;charset=utf-8',\r\n        'Accept':'*!/'\r\n      },\r\n      params: {\r\n        fileId: this.currentAllotFile.id + '',\r\n        sampleOssTypeId:this.drawingRects[0].id+'',\r\n        labelMessageObject:saveData\r\n      }\r\n    })\r\n    .subscribe((result: HttpResult<any>) => {\r\n      if (HttpResult.succeed(result.code)) {\r\n    \r\n        this.nzMessage.success(\"\");\r\n        // \r\n        // \r\n        if (this.allotFiles.length > 1) {\r\n          // \r\n          // this.allotFiles = this.allotFiles.filter(file => file.id !== this.currentAllotFile.id);\r\n          this.allotFiles.splice(this.currentIndex, 1);\r\n          this.currentAllotFile = this.allotFiles[this.currentIndex];\r\n          setTimeout(() => {\r\n            this.drawFileInCanvas(this.currentAllotFile);\r\n          }, 100);\r\n          this.drawingRects = [];\r\n        }else{\r\n          $(\"#aiLabel\").empty()\r\n          this.loadSampleFiles();\r\n        }\r\n        this.reqMarkCountData();\r\n      }\r\n    });\r\n    this.listenTime = new Date()\r\n    \r\n  }\r\n\r\n  setImgSize(){\r\n    if(!this.setImgSizeInfo.isBigImg){\r\n      let imgWidth = this.currentAllotFile.file.width;\r\n      if(!imgWidth){\r\n        let img = new Image()\r\n        img.src = this.currentAllotFile.file.imgSrc\r\n        imgWidth = img.width\r\n      }\r\n      this.gMapArr.zoomTo(imgWidth*2/(1/this.gMapArr.getScale()))\r\n      this.setImgSizeInfo.src = \"assets/images/icon07.png\"\r\n      this.setImgSizeInfo.title = \"\"\r\n      this.setImgSizeInfo.isBigImg = true\r\n    }else{\r\n      let imgWidth = this.currentAllotFile.file.width;\r\n      if(!imgWidth){\r\n        let img = new Image()\r\n        img.src = this.currentAllotFile.file.imgSrc\r\n        imgWidth = img.width\r\n      }\r\n      this.gMapArr.zoomTo(imgWidth*2/(1/this.gMapArr.getScale()))\r\n      this.setImgSizeInfo.src = \"assets/images/icon06.png\"\r\n      this.setImgSizeInfo.title = \"\"\r\n      this.setImgSizeInfo.isBigImg = false\r\n    }\r\n  }\r\n\r\nremoveImg(){\r\n  this.http.post(`${environment.API_URL}/v1/label_task/deleteImg?id=${this.currentAllotFile.id}`, {\r\n    }).subscribe((result: HttpResult<any>) => {\r\n      if (HttpResult.succeed(result.code)) {\r\n        this.allotFiles.splice(this.currentIndex, 1);\r\n        this.nzMessage.success(\"\");\r\n        if (this.allotFiles.length > 1) {\r\n          this.currentAllotFile = this.allotFiles[this.currentIndex];\r\n          setTimeout(() => {\r\n            this.drawFileInCanvas(this.currentAllotFile);\r\n          }, 100);\r\n            \r\n          this.drawingRects = [];\r\n        }else{\r\n          this.loadSampleFiles();\r\n        }\r\n\r\n        this.reqMarkCountData()\r\n      }else{\r\n        this.nzMessage.error(\"\");\r\n      } \r\n    \r\n    });\r\n \r\n  }\r\n  nextAllocFile() {\r\n    if (this.currentIndex < this.allotFiles.length - 1) {\r\n      this.currentIndex = this.currentIndex + 1;\r\n      this.currentAllotFile = this.allotFiles[this.currentIndex];\r\n      setTimeout(() => {\r\n        this.drawFileInCanvas(this.currentAllotFile);\r\n      }, 100);\r\n        \r\n      this.redraw();\r\n    }\r\n  }\r\n  selectAllocFile(index:any){\r\n    this.currentIndex = index\r\n    // this.currentIndex = this.currentIndex + 1;\r\n    this.currentAllotFile = this.allotFiles[index];\r\n    setTimeout(() => {\r\n      this.drawFileInCanvas(this.currentAllotFile);\r\n    }, 100);\r\n      \r\n    this.redraw();\r\n  }\r\n  prevAllocFile() {\r\n    if (this.currentIndex > 0) {\r\n      this.currentIndex = this.currentIndex - 1;\r\n      this.currentAllotFile = this.allotFiles[this.currentIndex];\r\n      setTimeout(() => {\r\n        this.drawFileInCanvas(this.currentAllotFile);\r\n      }, 100);\r\n        \r\n      this.redraw();\r\n    }\r\n  }\r\n  delRect(idx: number) {\r\n   \r\n    // console.log(idx,this.gMapArr.layers[1].features,this.selectClassIndex1)\r\n    if(idx == this.selectClassIndex1) this.labelShowAlone(this.selectClassIndex1-1)\r\n\r\n    this.gfeatureLayer.removeFeatureById(this.gMapArr.layers[1].features[idx].id);\r\n\r\n    // text\r\n    this.gMapArr.layers[2].removeTextById(this.gMapArr.layers[2].texts[idx].id);\r\n \r\n    if(this.drawingRects.length != 0){\r\n      this.drawingRects[idx].markData.relatedTextId.splice(idx-1,1)\r\n    }\r\n\r\n    this.drawingRects.splice(idx, 1);\r\n  }\r\n\r\n  editRect(idx: number,fileSample:any) {\r\n    this.drawingRects[idx].markData.rects = []\r\n    localStorage.setItem(\"markData\",JSON.stringify(this.drawingRects[idx].markData))\r\n    //oo\r\n    this.gMapArr.getActiveFeature()\r\n    // this.keyboardSubscription.unsubscribe()\r\n    this.removeKeyboard() \r\n    this.dataMarkService.creatNzModal(this,idx,fileSample)\r\n  }\r\n\r\n  autoMark() {\r\n    if (this.currentAllotFile) {\r\n      this.http.post(`${environment.API_URL}/v1/mark-detect`, {\r\n        \"ossKey\": this.currentAllotFile.file.ossKey\r\n      }).subscribe((result: HttpResult<any>) => {\r\n        if (HttpResult.succeed(result.code)) {\r\n          const marks = result.data;\r\n          const rects = []\r\n          if(marks.length == 0){\r\n            this.nzMessage.error(\"\");\r\n          }else{\r\n            this.nzMessage.success(\"\");\r\n\r\n            for (let i = 0; i < marks.length; i++) {\r\n              rects.push({\r\n                startX: Math.floor(marks[i].markPolygon.minX * this.currentAllotFile.scaleRatio),\r\n                startY: Math.floor(marks[i].markPolygon.minY * this.currentAllotFile.scaleRatio),\r\n                endX: Math.floor(marks[i].markPolygon.maxX * this.currentAllotFile.scaleRatio),\r\n                endY: Math.floor(marks[i].markPolygon.maxY * this.currentAllotFile.scaleRatio),\r\n                saved: false,\r\n                sampleId: marks[i].sampleOssType.id,\r\n                samplePath: marks[i].sampleOssType.sampleTypeName\r\n              })\r\n              let newDate = +new Date()\r\n              const relatedTextId = `label-text-id-${marks[i].sampleOssType.id}${i}${newDate}`;\r\n              var feature = new AILabel.Feature.Rect(marks[i].sampleOssType.id+\"_\"+i+`${newDate}`, \r\n                {height:marks[i].markPolygon.maxY - marks[i].markPolygon.minY,width:marks[i].markPolygon.maxX - marks[i].markPolygon.minX,x:marks[i].markPolygon.minX ,y: marks[i].markPolygon.minY}, \r\n                {name:'123',textId: relatedTextId}, \r\n                {fill: true,\r\n                  fillStyle: \"#0f0\",\r\n                  globalAlpha: 0.2,\r\n                  lineWidth: 1,\r\n                  opacity: 1,\r\n                  stroke: true,\r\n                  strokeStyle: \"red\"}\r\n              );\r\n              this.gfeatureLayer.addFeature(feature)\r\n              const {x: ltx, y: lty} = feature.shape;\r\n       \r\n              const gFirstText = new AILabel.Text(\r\n                relatedTextId, // id\r\n                {text:  marks[i].markPolygon.categoryCn, position: {x: ltx, y: lty}, offset: {x: 0, y: 0}}, // shape, \r\n                {name: ''}, // props\r\n                {fillStyle: '#15a0ff', strokeStyle: '#f0f8ff00', background: true, globalAlpha: 1, fontColor: '#fff'} // style\r\n            );\r\n            this.gMapArr.layers[2].addText(gFirstText);\r\n\r\n\r\n\r\n\r\n            this.currentAllotFile.relatedTextId.push(relatedTextId)\r\n             this.drawingRects.push({\r\n                      id:marks[i].sampleOssType.id,\r\n                      markData:this.currentAllotFile,\r\n                      samplePath:marks[i].sampleOssType.samplePath,\r\n                      relatedTextId\r\n                    })\r\n                   \r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  changeMarkMode(markMode: string) {\r\n    this.markMode = markMode;\r\n    if (this.markMode === 'auto') {\r\n      // \r\n      this.autoMark();\r\n    } else {\r\n      // \r\n      // this.drawingRects = [];\r\n      this.redraw();\r\n    }\r\n  }\r\n\r\n  changeUninterested(){\r\n    if(this.uninterested){\r\n      this.uninterested = false\r\n    }else{\r\n      this.uninterested = true\r\n    }\r\n  }\r\n  selectClassIndex1 = -1;\r\n  keyboarChangeFeature:any;\r\n\r\n  private keyBoardOfFeature() {\r\n\r\n    this.keyboarChangeFeature = fromEvent(window, 'keydown').subscribe((event: any) => {\r\n      if(event.keyCode == 40){\r\n        if((this.selectClassIndex1+1) <=0 || (this.selectClassIndex1+1) >= this.gMapArr.layers[1].features.length) return\r\n        this.labelShowAlone(this.selectClassIndex1+1)\r\n      }else if(event.keyCode == 38){\r\n        if((this.selectClassIndex1-1) < 0 || (this.selectClassIndex1-1) >= this.gMapArr.layers[1].features.length) return\r\n        this.labelShowAlone(this.selectClassIndex1-1)\r\n      }\r\n    });\r\n  }\r\n\r\n  gMapUnactive(){\r\n    this.gMapArr.setActiveFeature(null);\r\n    for (let index = 0; index < this.gMapArr.layers[1].features.length; index++) {\r\n      const element = this.gMapArr.layers[1].features[index];\r\n      if(element.props.name != \"uninterested\"){\r\n        this.drawingRects[index].select = false\r\n      }\r\n    }\r\n  }\r\n\r\n  featuresAllHiden:boolean = false\r\n  allFeaturesHide(){\r\n    this.gMapUnactive()\r\n    this.labelShowAlone(-1)\r\n    this.featuresAllHiden = true\r\n    if(this.keyboarChangeFeature || !this.keyboarChangeFeature.closed)  this.keyboarChangeFeature.unsubscribe()\r\n    for (let index = 0; index < this.gMapArr.layers[1].features.length; index++) {\r\n      let rectFeature = this.gMapArr.layers[1].features[index];\r\n      let textFeature = this.gMapArr.layers[2].texts[index];\r\n      if(rectFeature.props.name != \"uninterested\"){\r\n        if(rectFeature.style.stroke == true){\r\n          rectFeature.style.stroke = false\r\n          rectFeature.style.globalAlpha = 0\r\n          textFeature.style.fontColor = \"rgba(225,225,225,0)\"\r\n          textFeature.style.globalAlpha = 0\r\n        }\r\n    }\r\n  }\r\n  this.gMapArr.refresh()\r\n\r\n  }\r\n\r\n\r\n  allFeatures(){\r\n    this.featuresAllHiden = false\r\n    this.labelShowAlone(-1)\r\n    this.lableAloneStatus = false\r\n    if(this.keyboarChangeFeature || !this.keyboarChangeFeature.closed)  this.keyboarChangeFeature.unsubscribe()\r\n    if(this.keyboardVerifySubscription2){this.keyboardVerifySubscription2.unsubscribe()}\r\n    this.listenKeyboard2()\r\n    for (let index = 0; index < this.gMapArr.layers[1].features.length; index++) {\r\n      let rectFeature = this.gMapArr.layers[1].features[index];\r\n      let textFeature = this.gMapArr.layers[2].texts[index];\r\n      if(rectFeature.props.name != \"uninterested\"){\r\n        if(rectFeature.style.stroke == false){\r\n          rectFeature.style.stroke = true\r\n          rectFeature.style.globalAlpha = 0.2\r\n          textFeature.style.fontColor = \"#fff\"\r\n          textFeature.style.globalAlpha = 1\r\n        }\r\n    }\r\n  }\r\n  this.gMapArr.refresh()\r\n}\r\n\r\nfeatureActive(key){\r\n\r\n  \r\n\r\n}\r\n\r\n  labelShowAlone(key){\r\n    this.featuresAllHiden = false\r\n    this.lableAloneStatus = true\r\n    this.gMapUnactive()\r\n    if(!this.keyboarChangeFeature || this.keyboarChangeFeature.closed)  this.keyBoardOfFeature()\r\n    // if(this.keyboardVerifySubscription2) this.keyboardVerifySubscription2.unsubscribe()\r\n    this.selectClassIndex1 = key\r\n    // this.keyBoardOfFeature()\r\n    for (let index = 0; index < this.gMapArr.layers[1].features.length; index++) {\r\n      let rectFeature = this.gMapArr.layers[1].features[index];\r\n      let textFeature = this.gMapArr.layers[2].texts[index];\r\n      if(rectFeature.props.name != \"uninterested\"){\r\n      if(key != index){\r\n        rectFeature.style.stroke = false\r\n        rectFeature.style.globalAlpha = 0\r\n        textFeature.style.fontColor = \"rgba(225,225,225,0)\"\r\n        textFeature.style.globalAlpha = 0\r\n      }else{\r\n        rectFeature.style.stroke = true\r\n        rectFeature.style.globalAlpha = 0.2\r\n        textFeature.style.fontColor = \"#fff\"\r\n        textFeature.style.globalAlpha = 1\r\n      }\r\n  \r\n    }\r\n  }\r\n     this.gMapArr.refresh()\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\ninterface AllotFile {\r\n  id: number;\r\n  rects: DrawRect[];\r\n  file: any;\r\n  scaleRatio: number;\r\n  relatedTextId:any[];\r\n}\r\n\r\ninterface DrawRect {\r\n  startX: number;\r\n  startY: number;\r\n  endX: number;\r\n  endY: number;\r\n  saved: boolean;\r\n  sampleId: number;\r\n  samplePath: string;\r\n}\r\n","<div class=\"flex-row\">\r\n\r\n  <div class=\"annotation-left flex-row\">\r\n\r\n\r\n    <div class=\"annotation-operates flex-column\" style=\"margin-bottom: 100px;\">\r\n\r\n      <!--\r\n      <div class=\"annotation-operate-item\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon01.jpg\" alt=\"\">\r\n      </div>\r\n\r\n      <div class=\"annotation-operate-item\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon02.jpg\" alt=\"\">\r\n      </div>\r\n      -->\r\n\r\n      <!--\r\n      <div class=\"annotation-operate-item\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon03.jpg\" alt=\"\">\r\n      </div>\r\n      -->\r\n      <div class=\"annotation-operate-item\" (click)=\"removeImg()\" style=\"margin-top: 90px;\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon05.png\" alt=\"\" title=\"\">\r\n      </div>\r\n      <div class=\"annotation-operate-item\" (click)=\"cancelRect()\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon04.jpg\" alt=\"\" title=\"\">\r\n      </div>\r\n      <div class=\"annotation-operate-item\" (click)=\"setImgSize()\">\r\n        <img class=\"img-responsive pointer\" [src]=\"setImgSizeInfo.src\" alt=\"\" [title]=\"setImgSizeInfo.title\">\r\n      </div>\r\n      <div class=\"annotation-operate-item\" (click)=\"saveRect()\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon05.jpg\" alt=\"\" title=\"(ctrl+s)\">\r\n      </div>\r\n      <!--\r\n      <div class=\"annotation-operate-item\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon06.jpg\" alt=\"\">\r\n      </div>\r\n      <div class=\"annotation-operate-item\">\r\n        <img class=\"img-responsive pointer\" src=\"assets/images/icon07.jpg\" alt=\"\">\r\n      </div>\r\n      -->\r\n    </div>\r\n\r\n    <div class=\"anootation-area flex-column\">\r\n      <div class=\"anootation-area-btns flex-row\">\r\n        <button class=\"anootation-area-btn-item\" [class.active]=\"markMode === 'manual'\" (click)=\"changeMarkMode('manual')\">\r\n          \r\n        </button>\r\n        <button class=\"anootation-area-btn-item\" [class.active]=\"markMode === 'auto'\" (click)=\"changeMarkMode('auto')\">\r\n          \r\n        </button>\r\n      </div>\r\n\r\n     \r\n      <div class=\"anootation-area-operate canvas-group\" style=\"width:100%;left: 0;\">\r\n\r\n        \r\n    <div class=\"annotation-operate-item\" style=\"line-height: 50;border: none;position: absolute;left:0;z-index: 9999;\">\r\n      <img class=\"img-responsive pointer\" src=\"assets/images/pre.png\"  (click)=\"prevAllocFile()\"  alt=\"\" title=\"()\">\r\n    </div>\r\n    <div class=\"annotation-operate-item\" style=\"line-height: 50;position: absolute;right: 0;border: none;z-index: 9999;\">\r\n      <img class=\"img-responsive pointer\" src=\"assets/images/next.png\" (click)=\"nextAllocFile()\"  alt=\"\" title=\"()\">\r\n    </div>\r\n        <div class=\"canvas-container ai-label\" id=\"aiLabel\"  style=\"width: 85%;left:7.5%;border: 1px solid #fff;\">\r\n        </div>\r\n<!-- \r\n        <div class=\"canvas-container\">\r\n          <canvas class=\"mark-canvas\" #imgCanvasElement ></canvas>\r\n        </div>\r\n        <div class=\"canvas-container\">\r\n          <canvas class=\"mark-canvas\" #drawCanvasElement></canvas>\r\n        </div> -->\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n \r\n  <div class=\"annotation-right flex-column\">\r\n    <div class=\"annotation-classifies flex-column\">\r\n      <div class=\"annotation-title\"> <button nz-button nzType=\"primary\" nzSize=\"small\" style=\"margin-left: 10px;\" (click)=\"allFeatures()\"></button> <button nz-button nzDanger nzType=\"primary\" nzSize=\"small\" style=\"margin-left: 10px;\" (click)=\"allFeaturesHide()\"></button></div> \r\n      <div class=\"classifies\" style=\"overflow:scroll\">\r\n        <div class=\"classify-item flex-row\" *ngFor=\"let fileSample of drawingRects;index as idx;\">   <!-- (click)=\"labelShowAlone(idx)\" -->\r\n          <span class=\"classify-item-desc\" [ngClass]=\"{'classify-item-desc-active': idx == selectClassIndex1,'classify-item-desc-hiden': featuresAllHiden,'classify-item-desc-select':fileSample.select}\" (dblclick)=\"labelShowAlone(idx)\" (click)=\"gMapActive(idx)\" >{{fileSample.samplePath}}</span>\r\n          <span class=\"amanisky amani-edit\" (click)=\"editRect(idx,fileSample)\"></span>\r\n          <span class=\"amanisky amani-delete\" (click)=\"delRect(idx)\"></span>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"annotation-uninterested flex-column\" style=\"height: 200px;\">\r\n      <div class=\"annotation-title\"></div>\r\n      <div class=\"uninterested\" style=\"padding: 10px;text-align: center;\">\r\n        <button nz-button nzType=\"default\" [ngClass]=\"{'isuninterested': uninterested,'interested':!uninterested}\" (click)=\"changeUninterested()\"></button>\r\n      </div>\r\n    </div>\r\n    <div class=\"annotation-images flex-column\">\r\n      <div class=\"annotation-title\"></div>\r\n      <div class=\"annotation-images-box flex-row\">\r\n        <div class=\"annotation-image-item\" [class.active-allot-file]=\"currentAllotFile?.id === allotFile.id\"\r\n             *ngFor=\"let allotFile of allotFiles;let i = index\" (click)=\"selectAllocFile(i)\">\r\n             <!-- | ossPath -->\r\n          <img style=\"width: 100%;height: 100%\" [src]=\"allotFile.file.imgSrc\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"annotation-markData flex-column\">\r\n <div class=\"annotation-title\"></div>\r\n      <div style=\"padding: 10px;\" class=\"content\">\r\n        <div>\r\n          <span class=\"subTitle\">:</span><span class=\"data\">{{markcountData.stayMarkNum}}</span>\r\n        </div>\r\n        <div>\r\n          <span class=\"subTitle\">:</span><span  class=\"data\">{{markcountData.MarkedNum}}</span>\r\n        </div>\r\n        <div class=\"progressBox\">\r\n          <span class=\"subTitle\">:</span><p id=\"markCharts\" style=\"position: relative;\">\r\n            <nz-progress \r\n          \r\n            [nzPercent]=\"markcountData.MarkProgress\"\r\n            nzStrokeColor=\"#52c41a\"\r\n            ></nz-progress>\r\n            <span style=\"position: absolute;top: 5px;right: -8px;color: #fff;\">{{markcountData.stayMarkNum}}:{{markcountData.MarkedNum}}</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"progressBox\">\r\n          <span class=\"subTitle\">:</span><p id=\"markProgress\" style=\"position: relative;\"><nz-progress [nzPercent]=\"markcountData.MarkProgress\" nzStrokeColor=\"#52c41a\" nzStatus=\"active\"></nz-progress> <span style=\"position: absolute;top: 5px;right: -8px;color: #fff;\">{{markcountData.MarkProgress}}%</span></p>\r\n        </div>\r\n      </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {NzMessageModule, NzModalModule, NzTreeModule,NzInputModule,NzIconModule,NzDropDownModule,NzProgressModule } from 'ng-zorro-antd';\r\nimport {DataMarkRoutingModule} from './data-mark-routing.module';\r\nimport {DataMarkComponent} from './data-mark.component';\r\nimport {CommonModule} from \"@angular/common\";\r\nimport {AppCommonModule} from \"../../core/app-common.module\";\r\nimport {MarkSampleTreeComponent} from \"./mark-sample-tree.component\";\r\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\r\nimport { NzButtonModule } from 'ng-zorro-antd/button';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { DataMarkService } from './data-mark.service';\r\nconst APP_COMPONENTS = [DataMarkComponent, MarkSampleTreeComponent];\r\nconst NZ_MODULES = [NzTreeModule, NzModalModule, NzMessageModule,NzSpinModule,NzButtonModule,NzInputModule,NzIconModule,NzDropDownModule,NzProgressModule];\r\nconst NG_MODULES = [CommonModule,FormsModule];\r\n\r\n@NgModule({\r\n  declarations: [...APP_COMPONENTS],\r\n  imports: [DataMarkRoutingModule, ...NZ_MODULES, ...NG_MODULES, AppCommonModule],\r\n  providers:[DataMarkService]\r\n})\r\nexport class DataMarkModule {\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { NzModalService} from \"ng-zorro-antd\";\nimport {MarkSampleTreeComponent} from \"./mark-sample-tree.component\";\n\ndeclare var AILabel:any;\ndeclare var $:any;\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataMarkService {\n\nidsArr:any=[]\nisTree:boolean = true;\n\nconstructor(public nzModal: NzModalService,) {\n  \n }\n\ncreatNzModal(that:any,idx:any,fileSample:any){\n    this.nzModal.create({\n      nzTitle: '',\n      nzContent: MarkSampleTreeComponent,\n      nzOnOk: (markSampleTreeComponent: MarkSampleTreeComponent) => {\n        let sampleId \n        let classValue\n\n        if(markSampleTreeComponent.selectedSampleId){\n          sampleId= markSampleTreeComponent.selectedSampleId;\n          classValue = markSampleTreeComponent.classValue\n        }else{\n          return this.nzModal.openModals[0].triggerCancel()\n        }\n\n        if (sampleId && markSampleTreeComponent.nzTreeComponent && this.isTree){\n          const samplePath = markSampleTreeComponent.selectedSamplePath;\n          that.drawingRects[idx].sampleId = sampleId;\n          that.drawingRects[idx].samplePath = samplePath.split(\"/\")[samplePath.split(\"/\").length -2];\n          var albelText =  that.drawingRects[idx].samplePath\n          let arr = []\n          $.each(that.gMapArr.layers[1].features,function(i,n){\n              if(n.props.name != \"uninterested\"){\n                arr.push(n)\n              }\n          })\n          that.gMapArr.layers[1].features[idx].props.name = fileSample.sampleId  //idailabel\n         // text\n           that.drawingRects[idx].id = markSampleTreeComponent.selectedSampleId\n          that.gMapArr.layers[2].removeTextById(fileSample.markData.relatedTextId[idx]);\n         \n        //text\n          const {x: ltx, y: lty} = arr[idx].shape;\n          const relatedTextId = `label-text-id-${arr[idx].id}`;\n          const gFirstText = new AILabel.Text(\n          relatedTextId, // id\n          {text: albelText, position: {x: ltx, y: lty}, offset: {x: 0, y: 0}}, // shape, \n          {name: ''}, // props\n          {fillStyle: '#15a0ff', strokeStyle: '#f0f8ff00', background: true, globalAlpha: 1, fontColor: '#fff'} // style\n        );\n        that.gMapArr.layers[2].addText(gFirstText);\n        }else{\n          var samplePath:any;\n          let ix:any = 0\n          // const sampleId = markSampleTreeComponent.classListInfo[0].id;\n          $.each(markSampleTreeComponent.classListInfo,function(i,n){\n            if(n.id == sampleId){\n              ix = i\n              samplePath = markSampleTreeComponent.classListInfo[i].samplePath\n            }\n          })\n          that.drawingRects[idx].sampleId = sampleId;\n          that.drawingRects[idx].samplePath = samplePath\n          var albelText =  that.drawingRects[idx].samplePath\n          let arr = []\n    \n          $.each(that.gMapArr.layers[1].features,function(i,n){\n              if(n.props.name != \"uninterested\"){\n                \n                arr.push(n)\n              }\n          })\n          that.gMapArr.layers[1].features[idx].props.name = fileSample.sampleId //idailabel\n        \n           // text\n          markSampleTreeComponent.classListInfo[ix].relatedTextId = fileSample.markData.relatedTextId \n          fileSample.markData = markSampleTreeComponent.classListInfo[ix]\n          that.drawingRects[idx].id = fileSample.markData.id\n          that.gMapArr.layers[2].removeTextById(fileSample.markData.relatedTextId[idx]); \n          \n        //text\n          const {x: ltx, y: lty} = arr[idx].shape;\n          const relatedTextId = `label-text-id-${arr[idx].id}`;\n          const gFirstText = new AILabel.Text(\n            relatedTextId, // id\n            {text: albelText, position: {x: ltx, y: lty}, offset: {x: 0, y: 0}}, // shape, \n            {name: ''}, // props\n            {fillStyle: '#15a0ff', strokeStyle: '#f0f8ff00', background: true, globalAlpha: 1, fontColor: '#fff'} // style\n        );\n        that.gMapArr.layers[2].addText(gFirstText);\n      \n        }\n        that.listenKeyboard();\n        that.keyBoardOfFeature()\n      },\n      nzOnCancel: () => {\n        that.listenKeyboard();\n        that.keyBoardOfFeature()\n      }\n    });\n  }\n\n}\n","import {Component, OnInit, ViewChild} from \"@angular/core\";\r\nimport {NzFormatEmitEvent, NzTreeComponent, NzTreeNodeOptions,} from \"ng-zorro-antd\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {environment} from \"../../../environments/environment\";\r\nimport {HttpResult} from \"../../core/http-entity\";\r\nimport axios from 'axios';\r\nimport {DataMarkService} from \"./data-mark.service\"\r\nimport { fromEvent } from 'rxjs';\r\ndeclare var $:any;\r\n\r\n@Component({\r\n  templateUrl: './mark-sample-tree.component.html',\r\n  styleUrls: ['./mark-sample-tree.component.less']\r\n})\r\nexport class MarkSampleTreeComponent implements OnInit {\r\n  @ViewChild('nzTreeComponent', {static: false}) nzTreeComponent!: NzTreeComponent;\r\n  defaultCheckedKeys = [];\r\n  defaultSelectedKeys = [];\r\n  defaultExpandedKeys = [];\r\n  nodes: NzTreeNodeOptions[] = [];\r\n  selectedSampleId: any;\r\n  selectedSamplePath: string;\r\n  isRequsetAll:any = false\r\n  classValue:string = \"\";\r\n  classList:any = []\r\n  classListInfo:any = [];\r\n  keyboardTreeSubscription:any;\r\n  slectNum:number = -1;\r\n  constructor(private http: HttpClient,private dataMarkService:DataMarkService) {\r\n\r\n    this.dataMarkService.isTree = true;\r\n  }\r\n\r\n\r\n  private listenKeyboard() {\r\n    this.keyboardTreeSubscription = fromEvent(window, 'keydown').subscribe((event: any) => {\r\n      if(event.keyCode == 40){\r\n        if(this.slectNum < this.classList.length-1){\r\n          this.slectNum += 1\r\n        }else{\r\n          this.slectNum = this.classList.length-1\r\n        }\r\n      }else if(event.keyCode == 38){\r\n        if (this.slectNum > 0 ){\r\n          this.slectNum -= 1\r\n        }else{\r\n          this.slectNum = 0\r\n        } \r\n      }else if(event.keyCode == 13){\r\n        this.selectClass(this.classList[this.slectNum])\r\n      }\r\n    });\r\n  }\r\n  removeKeyboard() {\r\n    this.keyboardTreeSubscription.unsubscribe()\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n      let markData = JSON.parse(localStorage.getItem(\"markData\"))\r\n    \r\n      let imgId\r\n      try{\r\n        imgId= markData.file.sampleTypeId\r\n       this.classValue = markData.file.samplePath\r\n      }catch(e){\r\n        imgId= markData.id\r\n        this.classValue = markData.sampleTypeName\r\n      }\r\n   \r\n    this.http.get(`${environment.API_URL}/v1/sample-oss-types`).subscribe((result: HttpResult<any>) => {\r\n      if (HttpResult.succeed(result.code)) {\r\n        this.nodes = result.data.map((data) => {\r\n          return {\r\n            title: data.data.sampleTypeName,\r\n            key: data.data.id+\"\",\r\n            isLeaf: data.isLeaf,\r\n            samplePath: data.data.samplePath\r\n          }\r\n        });\r\n      \r\n        this.expandSampleNode(\"\",imgId)\r\n        this.listenKeyboard();\r\n      }\r\n    });\r\n\r\n  \r\n\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    //Called once, before the instance is destroyed.\r\n    //Add 'implements OnDestroy' to the class.\r\n    this. removeKeyboard()\r\n  }\r\n\r\n  expandSampleNode(event: any,type:any) {\r\n  \r\n    if (event.eventName === 'expand' && type == \"handClick\") {\r\n      if (event.node.isExpanded && event.node.children.length === 0) {\r\n        // \r\n        this.loadChildrenSamples(event.node.key).subscribe((result: HttpResult<any>) => {\r\n          if (HttpResult.succeed(result.code)) {\r\n          \r\n            const childrenNodes = result.data.map(data => {\r\n              return {\r\n                title: data.data.sampleTypeName,\r\n                key: data.data.id+\"\",\r\n                isLeaf: data.isLeaf,\r\n                samplePath: data.data.samplePath\r\n              }\r\n            });\r\n            \r\n            event.node.addChildren(childrenNodes);\r\n\r\n          }\r\n        });\r\n      }\r\n    }else{\r\n   \r\n      this.http.get(`${environment.API_URL}/v1/sample-oss-types/getTypeMap?id=${type}`)\r\n      .subscribe((result:any)=>{\r\n\r\n        if(!result.data){\r\n\r\n          this.http.get(`${environment.API_URL}/v1/sample-oss-types`).subscribe((result: HttpResult<any>) => {\r\n            if (HttpResult.succeed(result.code)) {\r\n              this.nodes = result.data.map((data) => {\r\n                return {\r\n                  title: data.data.sampleTypeName,\r\n                  key: data.data.id+\"\",\r\n                  isLeaf: data.isLeaf,\r\n                  samplePath: data.data.samplePath\r\n                }\r\n              });\r\n              this.isRequsetAll = true\r\n            }\r\n          });\r\n\r\n\r\n        }else{\r\n\r\n\r\n       \r\nlet data = JSON.parse(result.data)   \r\nvar that = this\r\n        let arr = []\r\n        let arr2 = []\r\n        getArr(data)\r\n        let index1 = arr.length-1\r\n\r\n   \r\n        for (let index = 0; index < this.nodes.length; index++) {\r\n          const element = this.nodes[index];\r\n          if(element.key == arr[arr.length-1]){\r\n\r\n            element.expanded=false\r\n            element.children=[]\r\n          }\r\n          \r\n        }\r\n      \r\n        request(index1)\r\n    \r\n      function request(index){\r\n              const element = arr[index];\r\n              that.loadChildrenSamples(element).subscribe((result: HttpResult<any>) => {\r\n                if (HttpResult.succeed(result.code)) {\r\n                  var childrenNodes:any;\r\n                  \r\n               \r\n                  if(arr[index-1]){\r\n                \r\n                    childrenNodes = result.data.map(data => {\r\n                      return {\r\n                        title: data.data.sampleTypeName,\r\n                        key: data.data.id+\"\",\r\n                        isLeaf: data.isLeaf,\r\n                        samplePath: data.data.samplePath,\r\n                        expanded: false,\r\n                        children:[],\r\n                      }\r\n\r\n                      \r\n                    });\r\n                    arr2.push({\r\n                      data:childrenNodes,\r\n                      key:arr[index-1]+\"\"\r\n                    })\r\n                  }else{\r\n\r\n                    childrenNodes = result.data.map(data => {\r\n                      return {\r\n                        title: data.data.sampleTypeName,\r\n                        key: data.data.id+\"\",\r\n                        isLeaf: data.isLeaf,\r\n                        samplePath: data.data.samplePath\r\n                      }\r\n                    });\r\n\r\n                    arr2.push({\r\n                      data:childrenNodes,\r\n                      key:arr[0]+\"\"\r\n                    })\r\n\r\n                  }\r\n               \r\n                 \r\n              \r\n\r\n                  index1--\r\n                  if(index1>= 0){\r\n                    request(index1)\r\n                  }else{\r\n\r\n                    // var fastTree:any = arr2\r\n                  \r\n\r\n                    for (let index = 0; index < arr2.length; index++) {\r\n                      const element = arr2[index];\r\n                \r\n                      for (let index1 = 0; index1 < element.data.length; index1++) {\r\n                        const element2 = element.data[index1];\r\n            \r\n                        if(element.key == element2.key){\r\n                            element2.children = arr2[index+1].data\r\n                         \r\n\r\n                        }\r\n                        \r\n                      }\r\n                    }\r\n\r\n\r\n                    for (let index = 0; index < that.nodes.length; index++) {\r\n                      const element = that.nodes[index];\r\n                  \r\n                      if(element.key == arr[arr.length-1]){\r\n                        element.children = arr2[0].data\r\n                       \r\n                       \r\n                      }\r\n                      \r\n                    }\r\n\r\n                    let selectSampleArr = []\r\n                    selectSampleArr[0] = data.id\r\n                    selectSampleArr[1] = data.samplePath\r\n                    selectSampleArr[2] = arr\r\n               \r\n                    that.selectSample('',selectSampleArr)\r\n                 \r\n\r\n\r\n                  }\r\n                }\r\n\r\n\r\n              });\r\n         }\r\n \r\n      \r\n\r\n\r\n        function getArr(data){\r\n          if(data.sampleOssType){\r\n            arr.push(data.sampleUpId)\r\n            return getArr(data.sampleOssType)\r\n          }else{\r\n            return false\r\n          } \r\n        }\r\n\r\n      }\r\n\r\n      })\r\n\r\n\r\n \r\n    }\r\n  }\r\n  \r\n  loadChildrenSamples(sampleUpId: string) {\r\n    return this.http.get(`${environment.API_URL}/v1/sample-oss-types`, {\r\n      params: {\r\n        sampleUpId\r\n      }\r\n    });\r\n  }\r\n\r\n  changeSelected(nodes:any){\r\n    var that = this;\r\n    $.each(nodes,function(i,n){\r\n      n.selected = false\r\n      if(n.children && n.children.length !=0){\r\n        that.changeSelected(n.children)\r\n      }\r\n  })\r\n  }\r\n\r\n\r\n  changeNodeSelected(nodes:any,event:any){\r\n    this.changeSelected(nodes)\r\n   //   \r\n    event.node.origin.selected = true\r\n  }\r\n\r\n\r\n  selectSample(event: any,type:any): void { \r\n    if(!type){ \r\n      this.selectedSampleId = event.node.key;\r\n      this.selectedSamplePath = event.node.origin.samplePath;\r\n      console.log(this.selectedSampleId,this.selectedSamplePath)\r\n      this.changeNodeSelected(this.nodes,event)\r\n    }else{\r\n      this.selectedSampleId = type[0]+\"\";\r\n      this.selectedSamplePath = type[1];\r\n      this.defaultCheckedKeys = [];\r\n      let arr = type[2].reverse()\r\n      arr = arr.map((data)=>{\r\n          return data+\"\"\r\n      })\r\n      for (let index = 0; index < arr.length; index++) {\r\n        const element = arr[index];\r\n        this.defaultExpandedKeys.push(element)\r\n      }\r\n      this.defaultSelectedKeys.push(this.selectedSampleId);\r\n      this.isRequsetAll = true\r\n    }\r\n\r\n    var arr = [this.nodes[this.defaultExpandedKeys[0]-1]];\r\n    \r\n    this.nodes = arr\r\n\r\n\r\n  }\r\n\r\nngAfterViewInit(): void {\r\n  //Called after ngAfterContentInit when the component's view has been initialized. Applies to components only.\r\n  //Add 'implements AfterViewInit' to the class.\r\n\r\n}\r\n\r\nclassSeach(){\r\n  this.classList = []\r\n  this.classListInfo = []\r\n \r\n    axios.post(`${environment.API_URL}/v1/sample-oss-file/relationQueryCatalogue?sampleTypeName=${this.classValue}`,{sampleTypeName:this.classValue},{\r\n      headers: {\r\n        'Authorization':'Bearer '+localStorage.getItem('Bearer'),\r\n        'TR-Role': 'TR-User'\r\n      }\r\n    })\r\n    .then((result:any)=>{\r\n      result.data.data.forEach(element => {\r\n          this.classList.push(element.sampleTypeName)\r\n          this.classListInfo.push(element)\r\n          this.slectNum = 0\r\n      });\r\n     \r\n    })\r\n}\r\n\r\nselectClass(val:string){\r\n\r\n  var that =this\r\n  this.classValue = val\r\n  $.each(this.classListInfo,function(i,n){\r\n    if(n.sampleTypeName == val){\r\n      that.selectedSampleId = n.id\r\n      console.log(n)\r\n    }\r\n  })\r\n  console.log(that.selectedSampleId)\r\n this.dataMarkService.isTree = false;\r\n  this.dataMarkService.nzModal.openModals[0].triggerOk()\r\n}\r\n\r\n}\r\n","\r\n<nz-spin nzTip=\"Loading...\" *ngIf=\"!isRequsetAll\">\r\n  \r\n</nz-spin>\r\n<!-- <button nz-button nzType=\"primary\"  *ngIf=\"isRequsetAll\" (click)=\"showDetail()\">{{buttonName}}</button> -->\r\n<div style=\"position: absolute;top: 14px;left: 130px;width: 200px;\" class=\"inputGroup\">\r\n  <!-- <nz-input-group nz-dropdown [nzDropdownMenu]=\"menu\"> -->\r\n    <input type=\"text\" nz-input placeholder=\"\" [(ngModel)]=\"classValue\" (ngModelChange)=\"classSeach()\" id=\"classSeach\" autocomplete=\"off\"/>\r\n  <!-- </nz-input-group> -->\r\n  <!-- <ng-template #suffixIconSearch>\r\n    <i nz-icon nzType=\"search\"></i>\r\n  </ng-template> -->\r\n  <!-- <nz-dropdown-menu #menu=\"nzDropdownMenu\"> -->\r\n    <ul nz-menu nzSelectable >\r\n      <li  nz-menu-item *ngFor=\"let item of classList;let i = index\" (click)=\"selectClass(item)\" [ngClass]=\"{'isSelect': slectNum == i}\">{{item}}</li>\r\n    </ul>\r\n  <!-- </nz-dropdown-menu> -->\r\n</div>\r\n\r\n\r\n<nz-tree\r\n  #nzTreeComponent\r\n  [nzData]=\"nodes\"\r\n  [nzCheckedKeys]=\"defaultCheckedKeys\"\r\n  [nzExpandedKeys]=\"defaultExpandedKeys\"\r\n  [nzSelectedKeys]=\"defaultSelectedKeys\"\r\n  (nzClick)=\"selectSample($event,'')\"\r\n  (nzExpandChange)=\"expandSampleNode($event,'handClick')\"\r\n  *ngIf=\"isRequsetAll\"\r\n>\r\n</nz-tree>\r\n"],"sourceRoot":"webpack:///"}